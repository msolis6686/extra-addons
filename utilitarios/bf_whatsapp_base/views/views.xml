<odoo>
  <data>
    <!-- vista tree -->
    <record model="ir.ui.view" id="view_bf_whatsapp_message_tree">
      <field name="name">view.bf.whatsapp.message.tree</field>
      <field name="model">bf.whatsapp.message</field>
      <field name="arch" type="xml">
        <tree string='Whatsapp Message'>
          <field name="id_w" string="ID"/>
          <field name="name" string="Nombre"/>
          <field name="phone" string="Celular"/>
          <field name="message" string="Mensaje"/>
          <field name="server_name" string="Nombre del Servidor"/>
          <field name="create_date" string="Fecha de Creación"/>
          <field name="sent_date" string="Fecha de Envio"/>
          <field name="send_state" string="Estado"/>
        </tree>
      </field>
    </record>
    <!-- vista form -->
    <record model="ir.ui.view" id="view_bf_whatsapp_message_form">
      <field name="name">view.bf.whatsapp.message.form</field>
      <field name="model">bf.whatsapp.message</field>
      <field name="arch" type="xml">
        <form string='Mensaje de WhatsApp'>
          <sheet>
            <field name="active" invisible="1"/>
            <div class="oe_button_box" name="button_box">
              <button name="send_message" type="object" class="oe_stat_button" string="Enviar" icon="fa-play-circle"/>
            </div>
            <group name='group_top'>
              <field name="id_w"/>
              <field name="name" string="Nombre" attrs="{'readonly':[('send_state','=',True)]}"/>
              <field name="phone" string="Celular" attrs="{'readonly':[('send_state','=',True)]}"/>
              <field name="message" string="Mensaje" attrs="{'readonly':[('send_state','=',True)]}"/>
              <field name="attachment_ids" string="Adjuntos" widget="many2many_binary" invisible="0" attrs="{'readonly':[('send_state','=',True)]}"/>
              <field name="create_date" string="Fecha de Creación" readonly="True" force_save="True"/>
              <field name="sent_date" string="Fecha de Envio" readonly="True" force_save="True"/>
              <field name="send_state" string="Estado" invisible="True"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <!-- vista tree -->
    <record model="ir.ui.view" id="view_bf_whatsapp_config_tree">
      <field name="name">view.bf.whatsapp.config.tree</field>
      <field name="model">bf.whatsapp.config</field>
      <field name="arch" type="xml">
        <tree string='Configuración de WhatsApp'>
          <field name="name" string="Nombre"/>
          <field name="link_api" string="Link de API"/>
          <field name="user_name" string="Usuario"/>
          <field name="user_pass" string="Contraseña" password="True"/>
          <field name="active_conf" string="¿Activo?"/>          
        </tree>
      </field>
    </record>
    <!-- vista form -->
    <record model="ir.ui.view" id="view_bf_whatsapp_config_form">
      <field name="name">view.bf.whatsapp.config.form</field>
      <field name="model">bf.whatsapp.config</field>
      <field name="arch" type="xml">
        <form string='Configuración de WhatsApp'>
          <sheet>
            <header>
              <button name="status_services" type="object" class="oe_stat_button" string="Estado del Servicio" icon="fa-play-circle"/>
              <button name="initializing_services" type="object" class="oe_stat_button" string="Inicializar Servicio" icon="fa-play-circle"/>
              <button name="connected_services" type="object" class="oe_stat_button" string="Recuperar QR..." icon="fa-play-circle"/>
            </header>
            <group name='group_top'>
              <field name="name" string="Nombre"/>
              <field name="link_api" string="Link de API"/>
              <field name="user_name" string="Usuario" password="True"/>
              <field name="user_pass" string="Contraseña" password="True"/>
              <field name="num_msg" string="N° de Msg."/>
              <field name="header_message" string="Cabecera del mensaje"/>
              <field name="footer_message" string="Pie del mensaje"/>
              <field name="phone_company" string="Celular de Compañia"/>
              <field name="logo" string="Logo de la Compañia" widget='image' style="width:200px;" filename="logo_name"/>
              <field name="logo_name" invisible="1"/>
              <field name="logo_url" widget='url'/>
              <field name="active_conf" string="¿Activo?"/>
              <field name="qr_w" widget="ace"/>
              <field name="qrs_strings" readonly="True" force_save="True">
                <tree>
                  <field name="qr_image" string="Imagen QR" widget="image" style="width:300px;"/>
                </tree>
              </field>
            </group>
          </sheet>
        </form>
      </field>
    </record>
    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="bf_whatsapp_base_messages_action_window">
      <field name="name">Mensajes de WhatsApp</field>
      <field name="res_model">bf.whatsapp.message</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Listado de Mensajes
        </p>
        <p>
          Click 'Nuevo' para añadir nuevos elementos
        </p>
      </field>
    </record>

    <record model="ir.actions.act_window" id="bf_whatsapp_base_mail_templates">
      <field name="name">Plantillas</field>
      <field name="res_model">mail.template</field>
      <field name="view_mode">tree,form</field>
      <field name="domain">[('is_wa_template','=',True)]</field>
      <field name="context">{'whats_app_module':True}</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Listado de Plantillas de WhatsApp
        </p>
        <p>
          Click 'Nuevo' para añadir nuevas plantillas.
        </p>
      </field>
    </record>

    <record model="ir.actions.act_window" id="bf_whatsapp_config_action_windows">
      <field name="name">Configuración de WhatsApp</field>
      <field name="res_model">bf.whatsapp.config</field>
      <field name="view_mode">tree,form</field>
    </record>


    <!-- vista search -->
    <record model="ir.ui.view" id="view_bf_whatsapp_message_search">
      <field name="name">view.bf.whatsapp.message.search</field>
      <field name="model">bf.whatsapp.message</field>
      <field name="arch" type="xml">
        <search string="Filtrar Mensajes">
          <field name="id_w" string="ID"/>
          <field name="name" string="Nombre"/>
          <field name="phone" string="Celular"/>
          <field name="message" string="Mensaje"/>
        </search>
      </field>
    </record>


    <!-- BUTTONS -->
    <record model="ir.ui.view" id="whatsapp_demo_sale">
        <field name="name">custom_whatsapp_module_demo_1</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//form/header/button[@name='action_cancel']" position="after">
                <button name="sale_whatsapp" type="object" class="btn btn-success" string="Enviar por WhatsApp"
                        icon="fa-whatsapp"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="whatsapp_demo_inventory_order">
        <field name="name">custom_whatsapp_module_demo_2</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//form/header/button[@name='action_cancel']" position="after">
                <button name="inventory_whatsapp" type="object" class="btn btn-success"
                        string="Enviar por WhatsApp"
                        icon="fa-whatsapp"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="whatsapp_demo_invoice_order">
        <field name="name">custom_whatsapp_module_demo_4</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//form/header/button[@name='button_draft']" position="after">
                <button name="invoice_whatsapp" type="object" class="btn btn-success" string="Enviar por WhatsApp"
                        icon="fa-whatsapp"/>
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="whatsapp_demo_purchase_order">
        <field name="name">custom_whatsapp_module_demo_3</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//form/header/button[@name='button_cancel']" position="after">
                <button name="purchase_whatsapp" type="object" class="btn btn-success" string="Enviar por WhatAapp"
                        icon="fa-whatsapp"/>
            </xpath>
        </field>
    </record>

    <!-- MENUS -->

    <menuitem
        id="bf_whatsapp_base.menu_root"
        name="WhatsApp"
        web_icon="bf_whatsapp_base,static/description/w_icon.png"
        sequence="20"
        groups="bf_whatsapp_base.group_what_admin"/>

    <menuitem name="Mensajes de WhatsApp" id="bf_whatsapp_base.messages" parent="bf_whatsapp_base.menu_root" sequence="21"/>
    <menuitem name="Mensajes enviados" id="bf_whatsapp_base.messages_list" parent="bf_whatsapp_base.messages"
              action="bf_whatsapp_base_messages_action_window"/>
    <menuitem name="Plantillas" id="bf_whatsapp_base.templates" parent="bf_whatsapp_base.menu_root"
      action="bf_whatsapp_base_mail_templates" sequence="22"/>
    <menuitem name="Configuración de WhatsApp" id="bf_whatsapp_base.config" parent="bf_whatsapp_base.menu_root" sequence="23" groups="bf_whatsapp_base.group_what_tecnico"/>
    <menuitem name="Conectar Servidor" id="bf_whatsapp_base.config_setup" parent="bf_whatsapp_base.config" 
              action="bf_whatsapp_config_action_windows"/>

  </data>
</odoo>