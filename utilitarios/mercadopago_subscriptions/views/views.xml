<odoo>
    <data>

      <!-- INHERIT DE RES PARTNER PARA PONER EL TIPO DE SUBSCRIPCION DEL CLIENTE -->
      <record id="res_partner_form_subscription_inherit" model="ir.ui.view">
        <field name="name">res.partner.form.subscription.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
          <xpath expr="//sheet" position="before">
            <header>
              <button string="Crear Subscripcion" 
                name="compose_subscription_mercadopago" 
                type="object" 
                class="btn-info" 
                attrs="{'invisible': [('subscription_confirmed','=',True)]}"/>
              <button string="Forzar Reenvio de Correo" 
                name="compose_subscription_mercadopago" 
                type="object" 
                class="btn-warning"
                attrs="{'invisible': [('subscription_confirmed','=',False)]}"/>
            </header>
          </xpath>
          <xpath expr="//field[@name='website']" position="before">
            <field name="subscription_type" string="Tipo de Subscripción" options="{'no_create':True, 'no_edit':True, 'no_open':True}"/>
            <field name="mail_counter" string="Intentos de Contacto" readonly="1" force_save="1" attrs="{'invisible':[('subscription_confirmed','=', True)]}"/>
            <field name="subscription_confirmed" string="Subscripcion Confirmada" attrs="{'invisible':[('subscription_type','=', False)]}"/>
          </xpath>
        </field>
      </record>
      <!-- INHERIT DE RES PARTNER PARA PONER EL TIPO DE SUBSCRIPCION DEL CLIENTE -->

    <!-- VISTA FORM DE LOS TIPOS DE SUBSCRIPCIONES -->
    <record id="mp_tipo_subscripciones_form_view" model="ir.ui.view">
        <field name="name">mp.tipo.subscripciones.form.view</field>
        <field name="model">mercadopago.subscriptions</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                  <group>
                    <field name="name" string="Tipo de Subscripción" required="True"/>
                    <field name="description" string="Descripcion de la Subscripción"/>
                    <field name="mp_link" string="Link de MercadoPago" required="True"/>
                    <!-- <field name="internal_note" string="Nota interna"/> -->
                  </group>
                </sheet>
            </form>
        </field>
    </record>
    <!-- VISTA FORM DE LOS TIPOS DE SUBSCRIPCIONES -->

    <!-- VISTA TREE DE LOS TIPOS DE SUBSCRIPCIONES -->
    <record id="mp_tipo_subscripciones_tree_view" model="ir.ui.view">
        <field name="name">mp.tipo.subscripciones.tree.view</field>
        <field name="model">mercadopago.subscriptions</field>
        <field name="arch" type="xml">
            <tree>
              <field name="name" string="Tipo de Subscripción"/>
              <field name="description" string="Descripcion de la Subscripción"/>
            </tree>
        </field>
    </record>
    <!-- VISTA TREE DE LOS TIPOS DE SUBSCRIPCIONES -->

    <!-- ARMADO DE ACCION PARA PODER INGRESAR A LA VISTA -->
    <record id="mp_subscriptions_menu_action" model="ir.actions.act_window">
          <field name="name">Tipos de Subscripciones de MercadoPago</field>
          <field name="type">ir.actions.act_window</field>
          <field name="res_model">mercadopago.subscriptions</field>
          <field name="view_mode">tree,form</field>
    </record>
    <!-- ARMADO DE ACCION PARA PODER INGRESAR A LA VISTA -->

    <!-- BOTON PARA ACCEDER A LA ACCION QUE DIRIGE A LA VISTA -->
    <menuitem id="menu_mp_subscriptions"
                  name="Tipos de Subscripciones"
                  parent="account.menu_finance_receivables"
                  action="mp_subscriptions_menu_action"
                  sequence="1000"/>
    <!-- BOTON PARA ACCEDER A LA ACCION QUE DIRIGE A LA VISTA -->
    </data>

    <!-- ACCION DE SERVER PARA AGREGAR EL BOTON DE "Enviar Subscripciones" EN EL MODELO DE RES.PARTNER -->
    <record id="action_mass_subscription" model="ir.actions.server">
      <field name="name">Enviar Subscripciones</field>
      <field name="model_id" ref="base.model_res_partner"/>
      <field name="binding_model_id" ref="base.model_res_partner"/>
      <field name="binding_view_types">list</field>
      <field name="state">code</field>
      <field name="code">
        action = records.prepare_mass_subscription()
      </field>
    </record>
    <!-- ACCION DE SERVER PARA AGREGAR EL BOTON DE "Enviar Subscripciones" EN EL MODELO DE RES.PARTNER -->
</odoo>